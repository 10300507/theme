{% comment %}
  Header Section
  Main navigation for the ebook store
{% endcomment %}

<header class="enterprise-header ebook-header">
  <div class="container">
    <div class="header-content">
      <div class="logo-section">
        <a href="/" class="enterprise-logo ebook-logo">
          <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: middle; margin-right: 10px;">
            <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
            <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
          </svg>
          {{ shop.name }}
        </a>
        <span class="site-tagline">Your Complete Shopping Experience</span>
      </div>

      <nav class="main-navigation">
        <ul class="enterprise-nav">
          <li><a href="/">Home</a></li>
          <li><a href="/collections/all">All Products</a></li>
          <li class="has-dropdown has-megamenu">
            <a href="/collections">Shop</a>
            <div class="mega-menu">
              <div class="mega-menu-content">
                <div class="mega-menu-column">
                  <h4>Digital Products</h4>
                  <ul>
                    <li><a href="/collections/ebooks">Ebooks</a></li>
                    <li><a href="/collections/audiobooks">Audiobooks</a></li>
                    <li><a href="/collections/courses">Online Courses</a></li>
                    <li><a href="/collections/software">Software</a></li>
                  </ul>
                </div>
                <div class="mega-menu-column">
                  <h4>Physical Products</h4>
                  <ul>
                    <li><a href="/collections/books">Physical Books</a></li>
                    <li><a href="/collections/merchandise">Merchandise</a></li>
                    <li><a href="/collections/accessories">Accessories</a></li>
                    <li><a href="/collections/gift-cards">Gift Cards</a></li>
                  </ul>
                </div>
                <div class="mega-menu-column">
                  <h4>Categories</h4>
                  <ul>
                    {% for collection in collections limit: 6 %}
                      {% if collection.all_products_count > 0 %}
                        <li><a href="{{ collection.url }}">{{ collection.title }}</a></li>
                      {% endif %}
                    {% endfor %}
                  </ul>
                </div>
                <div class="mega-menu-column mega-menu-featured">
                  <h4>Featured</h4>
                  <div class="featured-item">
                    <span class="featured-badge">New</span>
                    <p>Check out our latest releases and bestsellers!</p>
                    <a href="/collections/featured" class="featured-link">Shop Featured â†’</a>
                  </div>
                </div>
              </div>
            </div>
          </li>
          <li><a href="/pages/about">About</a></li>
          <li><a href="/pages/contact">Contact</a></li>
        </ul>
      </nav>

      <div class="header-actions">
        <div class="search-toggle">
          <button class="icon-btn" aria-label="Search">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="11" cy="11" r="8"></circle>
              <path d="m21 21-4.35-4.35"></path>
            </svg>
          </button>
        </div>

        <div class="account-link">
          <button class="icon-btn account-toggle" aria-label="Account Menu">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path>
              <circle cx="12" cy="7" r="4"></circle>
            </svg>
          </button>
          <div class="account-dropdown">
            {% if customer %}
              <div class="account-dropdown-header">
                <div class="account-avatar">
                  {{ customer.name | slice: 0 | upcase }}
                </div>
                <div class="account-info">
                  <p class="account-name">{{ customer.name | default: customer.email }}</p>
                  <p class="account-email">{{ customer.email }}</p>
                </div>
              </div>
              <div class="account-dropdown-menu">
                <a href="/account" class="dropdown-item">
                  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path>
                    <circle cx="12" cy="7" r="4"></circle>
                  </svg>
                  My Profile
                </a>
                <a href="/account/orders" class="dropdown-item">
                  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="3" width="18" height="18" rx="2"></rect>
                    <path d="M9 3v18"></path>
                  </svg>
                  My Orders
                </a>
                <a href="/account/addresses" class="dropdown-item">
                  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"></path>
                    <circle cx="12" cy="10" r="3"></circle>
                  </svg>
                  Addresses
                </a>
                <a href="#" class="dropdown-item" id="settingsBtn">
                  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="3"></circle>
                    <path d="M12 1v6m0 6v6m0-18a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2 2 2 0 0 1-2-2V3a2 2 0 0 1 2-2zm0 18a2 2 0 0 1-2-2v-2a2 2 0 0 1 2-2 2 2 0 0 1 2 2v2a2 2 0 0 1-2 2z"></path>
                  </svg>
                  Settings
                </a>
                <div class="dropdown-divider"></div>
                <a href="/account/logout" class="dropdown-item">
                  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                    <polyline points="16 17 21 12 16 7"></polyline>
                    <line x1="21" y1="12" x2="9" y2="12"></line>
                  </svg>
                  Logout
                </a>
              </div>
            {% else %}
              <div class="account-dropdown-menu">
                <a href="/account/login" class="dropdown-item">
                  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path>
                    <polyline points="10 17 15 12 10 7"></polyline>
                    <line x1="15" y1="12" x2="3" y2="12"></line>
                  </svg>
                  Login
                </a>
                <a href="/account/register" class="dropdown-item">
                  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path>
                    <circle cx="9" cy="7" r="4"></circle>
                    <line x1="19" y1="8" x2="19" y2="14"></line>
                    <line x1="22" y1="11" x2="16" y2="11"></line>
                  </svg>
                  Create Account
                </a>
              </div>
            {% endif %}
          </div>
        </div>

        <div class="cart-link">
          <a href="/cart" class="icon-btn cart-icon" aria-label="Shopping Cart">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="9" cy="21" r="1"></circle>
              <circle cx="20" cy="21" r="1"></circle>
              <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
            </svg>
            {% if cart.item_count > 0 %}
              <span class="cart-count">{{ cart.item_count }}</span>
            {% endif %}
          </a>
        </div>
      </div>

      <button class="mobile-menu-toggle" aria-label="Toggle Menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
  </div>
</header>

<div class="search-overlay" id="searchOverlay">
  <div class="search-container">
    <form action="/search" method="get" class="search-form">
      <input type="search" name="q" placeholder="Search for ebooks..." class="search-input" autocomplete="off">
      <button type="submit" class="search-submit">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="11" cy="11" r="8"></circle>
          <path d="m21 21-4.35-4.35"></path>
        </svg>
      </button>
    </form>
    <button class="search-close">&times;</button>
  </div>
</div>

<!-- Settings Modal -->
<div class="settings-modal" id="settingsModal">
  <div class="settings-content">
    <div class="settings-header">
      <h2>Settings & Preferences</h2>
      <button class="settings-close">&times;</button>
    </div>
    <div class="settings-body">
      <div class="settings-section">
        <h3>Display Preferences</h3>
        <div class="setting-item">
          <label for="productView">Product View:</label>
          <select id="productView" class="setting-select">
            <option value="grid">Grid View</option>
            <option value="list">List View</option>
          </select>
        </div>
        <div class="setting-item">
          <label for="itemsPerPage">Items Per Page:</label>
          <select id="itemsPerPage" class="setting-select">
            <option value="12">12</option>
            <option value="24" selected>24</option>
            <option value="48">48</option>
          </select>
        </div>
      </div>
      <div class="settings-section">
        <h3>Shopping Preferences</h3>
        <div class="setting-item">
          <label class="setting-checkbox">
            <input type="checkbox" id="showPrices" checked>
            <span>Show prices in my currency</span>
          </label>
        </div>
        <div class="setting-item">
          <label class="setting-checkbox">
            <input type="checkbox" id="emailNotifications" checked>
            <span>Email notifications for new products</span>
          </label>
        </div>
      </div>
      <div class="settings-section">
        <h3>Content Preferences</h3>
        <div class="setting-item">
          <label for="contentType">Show Content:</label>
          <select id="contentType" class="setting-select">
            <option value="all">All Products</option>
            <option value="digital">Digital Products Only</option>
            <option value="physical">Physical Products Only</option>
          </select>
        </div>
      </div>
      <div class="settings-actions">
        <button class="enterprise-btn" id="saveSettings">Save Preferences</button>
        <button class="enterprise-btn-secondary" id="resetSettings">Reset to Default</button>
      </div>
    </div>
  </div>
</div>

<script>
// Settings modal functionality
const settingsModal = document.getElementById('settingsModal');
const settingsClose = document.querySelector('.settings-close');

if (settingsClose) {
  settingsClose.addEventListener('click', function() {
    settingsModal.classList.remove('active');
  });
}

// Close modal when clicking outside
settingsModal.addEventListener('click', function(e) {
  if (e.target === settingsModal) {
    settingsModal.classList.remove('active');
  }
});

// Save settings
document.getElementById('saveSettings').addEventListener('click', function() {
  const settings = {
    productView: document.getElementById('productView').value,
    itemsPerPage: document.getElementById('itemsPerPage').value,
    showPrices: document.getElementById('showPrices').checked,
    emailNotifications: document.getElementById('emailNotifications').checked,
    contentType: document.getElementById('contentType').value
  };
  localStorage.setItem('userSettings', JSON.stringify(settings));
  alert('Settings saved successfully!');
  settingsModal.classList.remove('active');
});

// Reset settings
document.getElementById('resetSettings').addEventListener('click', function() {
  localStorage.removeItem('userSettings');
  document.getElementById('productView').value = 'grid';
  document.getElementById('itemsPerPage').value = '24';
  document.getElementById('showPrices').checked = true;
  document.getElementById('emailNotifications').checked = true;
  document.getElementById('contentType').value = 'all';
  alert('Settings reset to default!');
});

// Load saved settings
document.addEventListener('DOMContentLoaded', function() {
  const savedSettings = localStorage.getItem('userSettings');
  if (savedSettings) {
    const settings = JSON.parse(savedSettings);
    document.getElementById('productView').value = settings.productView || 'grid';
    document.getElementById('itemsPerPage').value = settings.itemsPerPage || '24';
    document.getElementById('showPrices').checked = settings.showPrices !== false;
    document.getElementById('emailNotifications').checked = settings.emailNotifications !== false;
    document.getElementById('contentType').value = settings.contentType || 'all';
  }
});
</script>

{% schema %}
{
  "name": "Header",
  "settings": []
}
{% endschema %}
