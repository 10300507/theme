{% comment %}
  Customer Account Template
  User profile and dashboard
{% endcomment %}

<div class="customer-account-page">
  <div class="container">
    <div class="account-layout">
      <aside class="account-sidebar">
        <div class="account-profile">
          <div class="profile-avatar">
            {{ customer.name | slice: 0 | upcase }}
          </div>
          <h2 class="profile-name">{{ customer.name | default: "Customer" }}</h2>
          <p class="profile-email">{{ customer.email }}</p>
        </div>
        
        <nav class="account-nav">
          <a href="/account" class="account-nav-item active">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
            </svg>
            Dashboard
          </a>
          <a href="/account/orders" class="account-nav-item">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="3" width="18" height="18" rx="2"></rect>
              <path d="M9 3v18"></path>
            </svg>
            My Orders
          </a>
          <a href="/account/addresses" class="account-nav-item">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"></path>
              <circle cx="12" cy="10" r="3"></circle>
            </svg>
            Addresses
          </a>
          <a href="#" class="account-nav-item">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
            </svg>
            Wishlist
          </a>
          <a href="/account/logout" class="account-nav-item">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
              <polyline points="16 17 21 12 16 7"></polyline>
              <line x1="21" y1="12" x2="9" y2="12"></line>
            </svg>
            Logout
          </a>
        </nav>
      </aside>

      <main class="account-main">
        <div class="account-header">
          <h1>My Dashboard</h1>
          <p>Welcome back! Here's an overview of your account.</p>
        </div>

        <div class="account-stats">
          <div class="stat-card">
            <div class="stat-icon">ğŸ“¦</div>
            <div class="stat-content">
              <h3>Total Orders</h3>
              <p class="stat-value">{{ customer.orders_count }}</p>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">ğŸ’°</div>
            <div class="stat-content">
              <h3>Total Spent</h3>
              <p class="stat-value">{{ customer.total_spent | money }}</p>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">â­</div>
            <div class="stat-content">
              <h3>Loyalty Points</h3>
              <p class="stat-value">{{ customer.total_spent | divided_by: 10 | round }}</p>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">ğŸ</div>
            <div class="stat-content">
              <h3>Active Rewards</h3>
              <p class="stat-value">Available</p>
            </div>
          </div>
        </div>

        <div class="account-sections">
          <section class="account-section">
            <div class="section-header">
              <h2>Recent Orders</h2>
              <a href="/account/orders" class="view-all">View All â†’</a>
            </div>
            {% if customer.orders.size > 0 %}
              <div class="orders-list">
                {% for order in customer.orders limit: 3 %}
                  <div class="order-item">
                    <div class="order-info">
                      <h3>Order #{{ order.name }}</h3>
                      <p class="order-date">{{ order.created_at | date: "%B %d, %Y" }}</p>
                    </div>
                    <div class="order-status">
                      <span class="status-badge status-{{ order.financial_status }}">
                        {{ order.financial_status }}
                      </span>
                    </div>
                    <div class="order-total">
                      {{ order.total_price | money }}
                    </div>
                    <a href="/account/orders/{{ order.id }}" class="order-link">View â†’</a>
                  </div>
                {% endfor %}
              </div>
            {% else %}
              <div class="empty-state">
                <p>You haven't placed any orders yet.</p>
                <a href="/collections/all" class="enterprise-btn">Start Shopping</a>
              </div>
            {% endif %}
          </section>

          <section class="account-section">
            <div class="section-header">
              <h2>Account Details</h2>
              <a href="#" class="edit-link">Edit</a>
            </div>
            <div class="account-details">
              <div class="detail-row">
                <span class="detail-label">Name:</span>
                <span class="detail-value">{{ customer.name | default: "Not set" }}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Email:</span>
                <span class="detail-value">{{ customer.email }}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Phone:</span>
                <span class="detail-value">{{ customer.phone | default: "Not set" }}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Member Since:</span>
                <span class="detail-value">{{ customer.created_at | date: "%B %Y" }}</span>
              </div>
            </div>
          </section>

          <section class="account-section">
            <div class="section-header">
              <h2>Default Address</h2>
              <a href="/account/addresses" class="edit-link">Manage</a>
            </div>
            {% if customer.default_address %}
              <div class="address-card">
                <p>{{ customer.default_address.address1 }}</p>
                {% if customer.default_address.address2 != blank %}
                  <p>{{ customer.default_address.address2 }}</p>
                {% endif %}
                <p>{{ customer.default_address.city }}, {{ customer.default_address.province_code }} {{ customer.default_address.zip }}</p>
                <p>{{ customer.default_address.country }}</p>
              </div>
            {% else %}
              <div class="empty-state">
                <p>No default address set.</p>
                <a href="/account/addresses" class="enterprise-btn-secondary">Add Address</a>
              </div>
            {% endif %}
          </section>
        </div>
      </main>
    </div>
  </div>
</div>
